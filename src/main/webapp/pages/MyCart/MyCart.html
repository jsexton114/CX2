<wm-page data-ng-controller="MyCartPageController" pagetitle="My Cart" name="page1">
    <wm-content name="content1">
        <wm-page-content columnwidth="12" name="page_content1">
            <wm-layoutgrid name="layoutgrid1">
                <wm-gridrow name="gridrow3_1">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn3_2">
                        <wm-wizard stepstyle="justified" name="wizardCheckOut" nextbtnlabel="Proceed to Checkout" donebtnlabel="Submit" on-done="wizardCheckOutDone($scope, steps)" cancelable="false" show="true">
                            <wm-wizardstep name="wizardstep1" iconclass="wi wi-shopping-cart" title="Review Cart" on-next="wizardstep1Next($scope, currentStep, stepIndex)">
                                <wm-layoutgrid name="layoutgrid2">
                                    <wm-gridrow name="gridrow4" padding="1em unset">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn4">
                                            <wm-grid title="" dataset="bind:Variables.svFeesInCartOfUser.dataSet" navigation="Classic" name="gridFeesList" showrecordcount="true">
                                                <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="100px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true" rowactionsposition="0"></wm-grid-column>
                                                <wm-grid-column binding="itemTitle" caption="Form Title" type="string" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-column binding="parentItemName" caption="Form" type="string" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-column binding="municipalityName" caption="Municipality" type="string" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-column binding="fullAddress" caption="Address" type="string" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-column binding="feeType" caption="Fee" type="string" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-column binding="amount" caption="Amount" type="string" formatpattern="toCurrency" currencypattern="USD" fractionsize="2" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                                <wm-grid-action key="addNewRow" display-name="bind:feeTotal | toCurrency:'$':'2'" show="true" class="btn-secondary" iconclass="" title="Total" action="" shortcutkey="" disabled="false"></wm-grid-action>
                                                <wm-grid-action key="customButton" display-name="Proceed to Checkout" show="false" class="btn-primary" iconclass="wi wi-navigate-next" title="Checkout" action="customButtonAction($event)" shortcutkey="" disabled="bind:feeTotal <= 0"></wm-grid-action>
                                                <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pageview" title="View Source" action="updaterowAction($event)" disabled="false"></wm-grid-row-action>
                                                <wm-grid-row-action key="customRow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Remove From Cart" action="Variables.lvDeleteFromCart.deleteRecord()" disabled="false"></wm-grid-row-action>
                                            </wm-grid>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow5">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn6">
                                            <wm-label padding="unset 0.5em" name="label1" caption="All credit card transactions are subject to a convenience fee of 3.0% plus $0.50 per transaction."></wm-label>
                                            <wm-label padding="unset 0.5em" name="label2" caption="This fee is imposed by CivicXpress, not the participating municipalities, and it covers bank transaction costs associated with credit card transactions."></wm-label>
                                            <wm-label padding="unset 0.5em" name="label3" caption="This convenience fee may be avoided by paying in person at the municipality payment counter."></wm-label>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                </wm-layoutgrid>
                            </wm-wizardstep>
                            <wm-wizardstep name="wizardstep2" title="Municipality Checkout" iconclass="wi wi-attach-money">
                                <wm-layoutgrid name="layoutgrid2">
                                    <wm-gridrow name="gridrow4" padding="1em unset 4em unset">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn4">
                                            <wm-label padding="unset 0.5em" name="label5" caption="bind:'Total: '+ ((Variables.svSumOfFeesInUsersCart.dataSet.sumOfFeesInCart || 0) | toCurrency:'$':2)" class="h1"></wm-label>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow5" padding=".2em unset">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn6">
                                            <wm-label padding="unset 0.5em" name="label6" caption="Payment Type" class="h3" fontweight="bold"></wm-label>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow6" padding="unset unset 2em unset">
                                        <wm-gridcolumn columnwidth="10" name="gridcolumn8">
                                            <wm-radioset height="auto" name="radiosetPaymentOptions" layout="inline" dataset="bind:Variables.stvPaymentOptions.dataSet" datafield="paymentType" displayfield="paymentType" selectedvalue="bind:Variables.stvPaymentOptions.dataSet[0].paymentType" usekeys="false"></wm-radioset>
                                        </wm-gridcolumn>

                                        <wm-gridcolumn columnwidth="2" name="gridcolumn9">
                                            <wm-html name="html1" show="bind:(Widgets.radiosetPaymentOptions.datavalue=='Credit Card')">
                                                <form action="https://www.wavemakeronline.com/run-700gxljbr3/CivicXpress/services/payment/chargeCreditCard" method="POST">
                                                    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button" data-key="pk_test_XPwevpSch24R4UhQqbH3bGPB" data-amount="999" data-name="TekDog Inc." data-description="Widget" data-image="https://s3.amazonaws.com/stripe-uploads/acct_1ASmehESexevkNnpmerchant-icon-1497016245641-CX200.png"
                                                    data-locale="auto">
                                                    </script>
                                                </form>
                                            </wm-html>
                                        </wm-gridcolumn>

                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow7" padding=".2em unset">
                                        <wm-gridcolumn columnwidth="1" name="gridcolumn13"></wm-gridcolumn>
                                        <wm-gridcolumn columnwidth="8" name="gridcolumn10">
                                            <wm-composite name="compositePaymentNumber" show="bind:(Widgets.radiosetPaymentOptions.datavalue=='Check')||(Widgets.radiosetPaymentOptions.datavalue=='Offline Credit Card')" required="{{((Widgets.radiosetPaymentOptions.datavalue=='Check')||(Widgets.radiosetPaymentOptions.datavalue=='Offline Credit Card'))}}">
                                                <wm-label class="col-md-3 form-control-static" name="labelPaymentNumber" caption="bind:Widgets.radiosetPaymentOptions.datavalue=='Check'?'Check Number':'Transaction ID'" fontweight="bold" required="false"></wm-label>
                                                <wm-container class="col-md-9" name="container2">
                                                    <wm-text name="textPaymentNumber"></wm-text>
                                                </wm-container>
                                            </wm-composite>
                                        </wm-gridcolumn>
                                        <wm-gridcolumn columnwidth="3" name="gridcolumn12_1"></wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow8">
                                        <wm-gridcolumn columnwidth="1" name="gridcolumn14_1"></wm-gridcolumn>
                                        <wm-gridcolumn columnwidth="8" name="gridcolumn12">
                                            <wm-composite name="compositeComments" required="true">
                                                <wm-label class="col-md-3 form-control-static" name="labelComments" caption="Comments" fontweight="bold"></wm-label>
                                                <wm-container class="col-md-9" name="container3">
                                                    <wm-textarea name="textareaComments" placeholder="Place Your Comments"></wm-textarea>
                                                </wm-container>
                                            </wm-composite>
                                        </wm-gridcolumn>
                                        <wm-gridcolumn columnwidth="3" name="gridcolumn11"></wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow9">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn14" horizontalalign="right"></wm-gridcolumn>
                                    </wm-gridrow>
                                </wm-layoutgrid>
                            </wm-wizardstep>
                        </wm-wizard>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow10">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn14_2">
                        <wm-container name="containerPaymentRecieved" margin="1em" backgroundcolor="#ffffff" horizontalalign="center" show="false">
                            <wm-label padding="unset 0.5em" name="label8" class="h3" caption="Thank you! The payment you submitted has been processed."></wm-label>
                        </wm-container>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
        </wm-page-content>
    </wm-content>
    <wm-view class="dialog-view" name="view3">
        <wm-pagedialog name="pagedialogViewForm" oktext="Close" content="_viewForm" modal="true" class="modal-larger" title="View Form" iconclass="wi wi-assignment">
            <wm-param name="FormGUID" value="bind:Widgets.gridFeesList.selecteditem.itemGuid" type="string"></wm-param>
        </wm-pagedialog>
    </wm-view>
    <wm-view class="dialog-view" name="view2">
        <wm-pagedialog name="pagedialogViewInspection" title="View Inspection" oktext="Close" content="_viewInspection" class="modal-larger" modal="true" iconclass="wi wi-find-in-page">
            <wm-param name="inspectionGuid" value="bind:Widgets.gridFeesList.selecteditem.itemGuid" type="string"></wm-param>
        </wm-pagedialog>
    </wm-view>
</wm-page>
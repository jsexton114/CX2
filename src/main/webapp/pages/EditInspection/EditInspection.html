<wm-page data-ng-controller="EditInspectionPageController" pagetitle="Edit Inspection" name="page1">
    <wm-header content="header" name="header1"></wm-header>
    <wm-top-nav content="topnav" name="top_nav1"></wm-top-nav>
    <wm-content name="content1">
        <wm-left-panel columnwidth="2" content="leftnav" name="left_panel1"></wm-left-panel>
        <wm-page-content columnwidth="10" name="page_content1">
            <wm-layoutgrid name="layoutgrid4">
                <wm-gridrow name="gridrow13">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn23">
                        <wm-breadcrumb dataset="bind:Variables.BreadCrum.dataSet" itemlabel="label" itemicon="icon" itemlink="link" name="breadcrumb1"></wm-breadcrumb>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow25_1">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn57_1" padding="2em unset">
                        <wm-label name="label2_1" caption="bind:'Edit Inspection: ' + Variables.CurrentInspectionObj.dataSet.data[$i].inspectDesignName + ' (' + Variables.CurrentInspectionObj.dataSet.data[$i].municipalities.municipalityName + ')'" fontweight="bold"
                        class="h4"></wm-label>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow26_1">
                    <wm-gridcolumn columlivenwidth="12" name="gridcolumn58_1">
                        <wm-tabs name="tabs1">
                            <wm-tabpane name="tabpaneFORMINFO" title="Settings"></wm-tabpane>
                            <wm-tabpane name="tabpaneCATEGORIES" title="Categories">
                                <wm-layoutgrid name="layoutgrid6">
                                    <wm-gridrow name="gridrow55">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn80">
                                            <wm-label padding="unset 0.5em" name="label15" caption="You can assign this Inspection Design to one or many Inspection Categories. This will affect where the Inspection appears to CivicXpress users, makes the Inspection searchable by Category, and is used to generate Municipality Analytics."></wm-label>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                    <wm-gridrow name="gridrow26">
                                        <wm-gridcolumn columnwidth="12" name="gridcolumn53">
                                            <wm-livegrid formlayout="dialog" name="livegridInspectioncategorymappin">
                                                <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.InspectionCategoryMappingData.dataSet" navigation="Classic" name="gridInspectioncategorymapping" filtermode="multicolumn"
                                                exportformat="EXCEL" showrecordcount="true">
                                                    <wm-grid-column binding="inspectionCategories.inspectionCategory" caption="Category" type="string" generator="assigned" readonly="true" edit-widget-type="text" show="true" related-entity-name="InspectionCategories"></wm-grid-column>
                                                    <wm-grid-column binding="inspectionCategories.inspectionCategoryDescription" caption="Description" type="string" generator="assigned" readonly="true" edit-widget-type="text" show="true"
                                                    related-entity-name="InspectionCategories"></wm-grid-column>
                                                    <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="120px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true"></wm-grid-column>
                                                    <wm-grid-action key="addNewRow" display-name="Add Category" show="true" class="btn-primary" iconclass="wi wi-plus" title="Add Category" action="addNewRow()" shortcutkey="" disabled="false"></wm-grid-action>
                                                    <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                                                </wm-grid>
                                                <wm-liveform novalidate="false" errormessage="The selected category has already been assigned to this inspection." title="Add Inspection Category" formlayout="dialog" iconclass="wi wi-group-work" dataset="bind:Variables.InspectionCategoryMappingData.dataSet"
                                                captionalign="left" captionposition="top" name="liveformInspectioncategorymappin">
                                                    <wm-layoutgrid columns="1" name="layoutgrid7">
                                                        <wm-gridrow name="gridrow28">
                                                            <wm-gridcolumn columnwidth="12" name="gridcolumn38">
                                                                <wm-form-field name="inspectionCategories" displayname="What category would you like to assign to this inspection?" show="true" primary-key="false" generator="assigned" key="inspectionCategories"
                                                                type="list" is-related="true" readonly="false" required="true" widget="select" placeholder="Select Category" dataset="bind:Variables.CurrentMunicipalityInspectionCategories.dataSet" displaylabel="inspectionCategory"
                                                                datafield="All Fields" displayfield="inspectionCategory" orderby="inspectionCategory:asc"></wm-form-field>
                                                            </wm-gridcolumn>
                                                        </wm-gridrow>
                                                        <wm-gridrow name="gridrow30_1">
                                                            <wm-gridcolumn columnwidth="12" name="gridcolumn62_2">
                                                                <wm-label name="label62_2" caption="If this inspection belongs in a category that isn't available above, you can create a new category on the Manage Inspections page." margin="1em unset unset unset"></wm-label>
                                                            </wm-gridcolumn>
                                                        </wm-gridrow>
                                                    </wm-layoutgrid>
                                                    <wm-form-field name="inspectionDesign" displayname="Inspection Design" show="false" primary-key="false" generator="assigned" key="inspectionDesign" type="list" is-related="true" readonly="false" required="false"
                                                    widget="select" placeholder="Select value" dataset="bind:Variables.CurrentInspectionObj.dataSet" datafield="All Fields" displayfield="inspectDesignName" defaultvalue="bind:Variables.CurrentInspectionObj.firstRecord"></wm-form-field>
                                                    <wm-form-field name="id" displayname="Id" show="false" primary-key="true" generator="identity" key="id" type="integer" readonly="true" required="true" step="0" widget="number" inputtype="number"
                                                    placeholder="Enter value"></wm-form-field>
                                                    <wm-form-action key="save" display-name="Add Category" show="true" class="form-save btn-primary" iconclass="wi wi-plus" title="Add Category" disabled="false" type="submit" update-mode="true"></wm-form-action>
                                                    <wm-form-action key="cancel" display-name="Cancel" show="true" class="form-cancel btn-secondary" iconclass="wi wi-cancel" title="Cancel" action="cancel()" disabled="false" type="button"
                                                    update-mode="true"></wm-form-action>
                                                </wm-liveform>
                                            </wm-livegrid>
                                        </wm-gridcolumn>
                                    </wm-gridrow>
                                </wm-layoutgrid>
                            </wm-tabpane>
                            <wm-tabpane name="tabpaneFields" title="Fields"></wm-tabpane>
                            <wm-tabpane name="tabpaneOutcomes" title="Outcomes">
                                <wm-livegrid formlayout="dialog" name="livegridOutcome">
                                    <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.InspectionOutcomeData.dataSet" navigation="Classic" name="gridOutcome" filtermode="multicolumn" showrecordcount="true" exportformat="EXCEL">
                                        <wm-grid-column binding="outcome" caption="Outcome" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                        <wm-grid-column binding="assessFeeYn" caption="Assess Fee" type="boolean" generator="assigned" edit-widget-type="checkbox" show="true" readonly="false"></wm-grid-column>
                                        <wm-grid-column binding="considerClosed" caption="Consider Closed" type="boolean" primary-key="false" generator="assigned" edit-widget-type="checkbox" show="true" readonly="false"></wm-grid-column>
                                        <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="120px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true"></wm-grid-column>
                                        <wm-grid-action key="addNewRow" display-name="New Outcome" show="true" class="btn-primary" iconclass="wi wi-plus" title="New Outcome" action="addNewRow()" shortcutkey="" disabled="false"></wm-grid-action>
                                        <wm-grid-row-action key="customRow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-attach-money" title="Fees" action="Widgets.dialogOutcomeFee.open()" disabled="false"></wm-grid-row-action>
                                        <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pencil" title="Edit" action="editRow()" disabled="false"></wm-grid-row-action>
                                        <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                                    </wm-grid>
                                    <wm-liveform novalidate="false" errormessage="" title="Outcome Details" formlayout="dialog" iconclass="wi wi-thumbs-up-down" dataset="bind:Variables.InspectionOutcomeData.dataSet" captionalign="left" captionposition="top"
                                    name="liveformOutcome">
                                        <wm-layoutgrid columns="1" name="layoutgrid4_1">
                                            <wm-gridrow name="gridrow8">
                                                <wm-gridcolumn columnwidth="12" name="gridcolumn8">
                                                    <wm-form-field name="outcome" displayname="Outcome Name" show="true" primary-key="false" generator="assigned" key="outcome" type="string" readonly="false" required="true" widget="text" maxchars="255" inputtype="text"
                                                    placeholder="Enter value" margin="unset unset 1em unset"></wm-form-field>
                                                </wm-gridcolumn>
                                            </wm-gridrow>
                                            <wm-gridrow name="gridrow9">
                                                <wm-gridcolumn columnwidth="6" name="gridcolumn9">
                                                    <wm-form-field name="assessFeeYn" displayname="Assess Fee" show="true" primary-key="false" generator="assigned" key="assessFeeYn" type="boolean" readonly="false" required="false" widget="checkbox" defaultvalue="true"
                                                    placeholder="" checkedvalue="true" uncheckedvalue="false" hint="If selected, this outcome will result in one or many fees being assessed."></wm-form-field>
                                                </wm-gridcolumn>
                                                <wm-gridcolumn columnwidth="6" name="gridcolumn10">
                                                    <wm-form-field name="considerClosed" displayname="Consider Closed" show="true" primary-key="false" generator="assigned" key="considerClosed" type="boolean" readonly="false" required="false" widget="checkbox"
                                                    defaultvalue="false" placeholder="" uncheckedvalue="false" checkedvalue="true" hint="If selected, this outcome will result in the inspections process being considered &quot;Closed&quot;, and should be reserved for the"></wm-form-field>
                                                </wm-gridcolumn>
                                            </wm-gridrow>
                                            <wm-gridrow name="gridrow1">
                                                <wm-gridcolumn name="gridcolumn1" columnwidth="12">
                                                    <wm-form-field name="inspectionDesign" displayname="Inspection Design" show="false" primary-key="false" generator="assigned" key="inspectionDesign" type="list" is-related="true" readonly="false" required="false"
                                                    widget="select" dataset="bind:Variables.CurrentInspectionObj.dataSet" datafield="All Fields" displayfield="inspectDesignName" defaultvalue="bind:Variables.CurrentInspectionObj.firstRecord"></wm-form-field>
                                                </wm-gridcolumn>
                                            </wm-gridrow>
                                        </wm-layoutgrid>
                                        <wm-form-field name="id" displayname="Id" show="false" primary-key="true" generator="identity" key="id" type="integer" readonly="true" required="true" step="0" widget="number" inputtype="number" placeholder="Enter value"></wm-form-field>
                                        <wm-form-action key="save" display-name="Save" show="true" class="form-save btn-primary" iconclass="wi wi-save" title="Save" disabled="false" type="submit" update-mode="true"></wm-form-action>
                                        <wm-form-action key="cancel" display-name="Cancel" show="true" class="form-cancel btn-secondary" iconclass="wi wi-cancel" title="Cancel" action="cancel()" disabled="false" type="button" update-mode="true"></wm-form-action>
                                    </wm-liveform>
                                </wm-livegrid>
                            </wm-tabpane>
                            <wm-tabpane name="tabpaneCXADMIN" title="CX Admin" accessroles="CXAdmin"></wm-tabpane>
                        </wm-tabs>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
        </wm-page-content>
    </wm-content>
    <wm-footer content="footer" name="footer1"></wm-footer>
    <wm-view class="dialog-view" name="viewtrue">
        <wm-dialog dialogtype="design-dialog" modal="true" title="Outcome Fees" iconclass="wi wi-attach-money" name="dialogOutcomeFee">
            <wm-dialogactions name="dialogactions1">
                <wm-button class="btn-secondary" caption="Close" on-click="closeDialog()" name="button1" iconclass="wi wi-cancel"></wm-button>
            </wm-dialogactions>
            <wm-livegrid formlayout="dialog" name="livegridOutcomeFee">
                <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.InspectionOutcomeFeeData.dataSet" navigation="Classic" name="gridOutcomeFee" filtermode="multicolumn" exportformat="EXCEL" showrecordcount="true">
                    <wm-grid-column binding="orderToApply" caption="Order To Apply" type="integer" generator="assigned" edit-widget-type="number" show="true" readonly="false"></wm-grid-column>
                    <wm-grid-column binding="accountCode" caption="Accounting Code" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                    <wm-grid-column binding="amount" caption="Fee Amount" type="integer" generator="assigned" formatpattern="toCurrency" currencypattern="USD" fractionsize="2" edit-widget-type="number" show="true" readonly="false"></wm-grid-column>
                    <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="120px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true"></wm-grid-column>
                    <wm-grid-action key="addNewRow" display-name="New Fee" show="true" class="btn-primary" iconclass="wi wi-plus" title="New Fee" action="addNewRow()" shortcutkey="" disabled="false"></wm-grid-action>
                    <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pencil" title="Edit" action="editRow()" disabled="false"></wm-grid-row-action>
                    <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                </wm-grid>
                <wm-liveform novalidate="false" errormessage="" title="Fee Details" formlayout="dialog" iconclass="wi wi-attach-money" dataset="bind:Variables.InspectionOutcomeFeeData.dataSet" captionalign="left" captionposition="top" name="liveformOutcomeFee">
                    <wm-layoutgrid columns="1" name="layoutgrid6_1">
                        <wm-gridrow name="gridrow16">
                            <wm-gridcolumn columnwidth="12" name="gridcolumn18">
                                <wm-form-field name="orderToApply" displayname="Order To Apply" required="true" show="true" generator="assigned" primary-key="false" key="orderToApply" type="integer" is-related="false" step="0" pc-display="true" mobile-display="true"
                                widget="number" minvalue="1" maxvalue="100"></wm-form-field>
                            </wm-gridcolumn>
                        </wm-gridrow>
                        <wm-gridrow name="gridrow15">
                            <wm-gridcolumn columnwidth="12" name="gridcolumn17">
                                <wm-form-field name="accountCode" displayname="Accounting Code" required="true" show="true" generator="assigned" primary-key="false" key="accountCode" type="string" is-related="false" maxchars="255" pc-display="true" mobile-display="true"
                                widget="text"></wm-form-field>
                            </wm-gridcolumn>
                        </wm-gridrow>
                        <wm-gridrow name="gridrow14">
                            <wm-gridcolumn columnwidth="12" name="gridcolumn16">
                                <wm-form-field name="amount" displayname="Fee Amount" required="true" show="true" generator="assigned" primary-key="false" key="amount" type="integer" is-related="false" step="0" pc-display="true" mobile-display="true" widget="number"></wm-form-field>
                            </wm-gridcolumn>
                        </wm-gridrow>
                        <wm-gridrow name="gridrow17">
                            <wm-gridcolumn columnwidth="12" name="gridcolumn19">
                                <wm-form-field name="inspectionOutcome" displayname="Inspection Outcome" required="false" show="false" generator="assigned" primary-key="false" key="inspectionOutcome" type="list" is-related="true" pc-display="true" mobile-display="true"
                                widget="select" dataset="bind:Variables.InspectionOutcomeData.dataSet" datafield="All Fields" displayfield="outcome" defaultvalue="bind:Widgets.gridOutcome.selecteditem"></wm-form-field>
                            </wm-gridcolumn>
                        </wm-gridrow>
                    </wm-layoutgrid>
                    <wm-form-field name="id" displayname="Id" required="true" show="false" generator="identity" primary-key="true" key="id" type="integer" is-related="false" step="0" pc-display="true" mobile-display="true" widget="number"></wm-form-field>
                    <wm-form-action key="save" class="form-save btn-primary" iconclass="wi wi-save" display-name="Save" show="true" type="submit" update-mode="true"></wm-form-action>
                    <wm-form-action key="cancel" class="form-cancel btn-secondary" iconclass="wi wi-cancel" action="cancel()" display-name="Cancel" show="true" type="button" update-mode="true"></wm-form-action>
                </wm-liveform>
            </wm-livegrid>
        </wm-dialog>
    </wm-view>
</wm-page>
<wm-page data-ng-controller="ManageMunicipalityVendorsPageController" pagetitle="Manage Municipality Vendors" name="page1">
    <wm-header content="header" name="header1"></wm-header>
    <wm-top-nav content="topnav" name="top_nav1"></wm-top-nav>
    <wm-content name="content1">
        <wm-left-panel columnwidth="2" content="leftnav" name="left_panel1"></wm-left-panel>
        <wm-page-content columnwidth="10" name="page_content1">
            <wm-layoutgrid name="layoutgrid2" columns="1">
                <wm-gridrow name="gridrow16">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn27">
                        <wm-breadcrumb dataset="bind:Variables.BreadCrum.dataSet" name="breadcrumb1" itemlabel="label" itemicon="icon" itemlink="link"></wm-breadcrumb>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow1">
                    <wm-gridcolumn columnwidth="6" name="gridcolumn1" padding="2em unset">
                        <wm-label name="label1" caption="Municipality Contractor Management" fontweight="bold" class="h4"></wm-label>
                    </wm-gridcolumn>
                    <wm-gridcolumn columnwidth="6" name="gridcolumn2" padding="2em unset">
                        <wm-composite name="composite1" show="bind:Variables.EmployeesMunicipalities.dataSet.content.length > 1">
                            <wm-label class="col-md-3 form-control-static" name="label2" caption="Select Municipality" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container1">
                                <wm-select name="selectMunicipalites" dataset="bind:Variables.EmployeesMunicipalities.dataSet" datafield="All Fields" displayfield="MunicipalityName" datavalue="bind:Variables.EmployeesMunicipalities.firstRecord" orderby="MunicipalityName:asc"></wm-select>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow19">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn31_1">
                        <wm-panel iconclass="wi wi-work" autoclose="outsideClick" name="panel1" title="Pending Review" class="panel-primary">
                            <wm-livegrid formlayout="dialog" name="livegrid2">
                                <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.ReviewVendorApprovals.dataSet" navigation="Classic" name="gridPending" filtermode="multicolumn" exportformat="EXCEL" showrecordcount="true">
                                    <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="100px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true" rowactionsposition="0"></wm-grid-column>
                                    <wm-grid-column binding="vendor.companyName" caption="Company" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvalStatus" caption="Review Status" type="string" primary-key="false" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="dateApproved" caption="Date Reviewed" type="timestamp" primary-key="false" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp"
                                    show="true" filterwidget="date" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvedBy" caption="Reviewed By" type="string" primary-key="false" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="expiresDate" caption="Expiration Date" type="timestamp" primary-key="false" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp"
                                    show="true" filterwidget="date" readonly="false"></wm-grid-column>
                                    <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-mode-edit" title="Review" action="Widgets.dialogPendingApprovals.open()" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="customRow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pageview" title="View Details" action="customRowAction($event)" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                                </wm-grid>
                            </wm-livegrid>
                        </wm-panel>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow20">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn32">
                        <wm-panel iconclass="wi wi-work" autoclose="outsideClick" name="panel2" title="Approved Contractors" class="panel-primary">
                            <wm-livegrid formlayout="dialog" name="livegrid2_1">
                                <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.ApprovedVendorApprovals.dataSet" navigation="Classic" name="gridApprovedVendors" filtermode="multicolumn" exportformat="EXCEL" showrecordcount="true">
                                    <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="100px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true" rowactionsposition="0"></wm-grid-column>
                                    <wm-grid-column binding="vendor.companyName" caption="Company" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvalStatus" caption="Review Status" type="string" primary-key="false" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="dateApproved" caption="Date Reviewed" type="timestamp" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp" show="true" filterwidget="date"
                                    readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvedBy" caption="Reviewed By" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="expiresDate" caption="Expiration Date" type="timestamp" primary-key="false" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp"
                                    show="true" filterwidget="date" readonly="false"></wm-grid-column>
                                    <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-mode-edit" title="Review" action="Widgets.dialogReviewApproved.open()" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="customRow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pageview" title="View Details" action="customRowAction($event)" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                                </wm-grid>
                            </wm-livegrid>
                        </wm-panel>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow21">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn33">
                        <wm-panel iconclass="wi wi-work" autoclose="outsideClick" name="panel3" title="Suspended Contractors" class="panel-primary">
                            <wm-livegrid formlayout="dialog" name="livegrid3">
                                <wm-grid gridfirstrowselect="true" editmode="dialog" title="" dataset="bind:Variables.SuspendedVendorApprovals.dataSet" navigation="Classic" name="gridSuspended" filtermode="multicolumn" exportformat="EXCEL" showrecordcount="true">
                                    <wm-grid-column binding="rowOperations" caption="Actions" type="custom" width="100px" readonly="true" edit-widget-type="text" sortable="false" searchable="false" show="true" rowactionsposition="0"></wm-grid-column>
                                    <wm-grid-column binding="vendor.companyName" caption="Company" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvalStatus" caption="Review Status" type="string" primary-key="false" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="dateApproved" caption="Date Reviewed" type="timestamp" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp" show="true" filterwidget="date"
                                    readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="approvedBy" caption="Reviewed By" type="string" generator="assigned" edit-widget-type="text" show="true" readonly="false"></wm-grid-column>
                                    <wm-grid-column binding="expiresDate" caption="Expiration Date" type="timestamp" primary-key="false" generator="assigned" datepattern="MM-dd-yyyy" formatpattern="toDate" edit-widget-type="timestamp"
                                    show="true" filterwidget="date" readonly="false"></wm-grid-column>
                                    <wm-grid-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-mode-edit" title="Review" action="Widgets.dialogReviewSuspended.open()" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="customRow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-pageview" title="View Details" action="customRowAction($event)" disabled="false"></wm-grid-row-action>
                                    <wm-grid-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash" title="Delete" action="deleteRow()" disabled="false"></wm-grid-row-action>
                                </wm-grid>
                            </wm-livegrid>
                        </wm-panel>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
        </wm-page-content>
    </wm-content>
    <wm-footer content="footer" name="footer1"></wm-footer>
    <wm-view class="dialog-view" name="view1" show="true">
        <wm-dialog dialogtype="design-dialog" modal="true" title="Vendor Profile" iconclass="wi wi-work" name="viewCompanyDetails" width="75%">
            <wm-dialogactions name="dialogactions1">
                <wm-button class="btn-secondary" caption="Close" on-click="closeDialog()" name="button1" iconclass="wi wi-cancel"></wm-button>
            </wm-dialogactions>
            <wm-container name="containerVendor" content="CompanyDetails">
                <wm-param name="companyID" value="bind:Variables.stvSelectedVendor.dataSet.dataValue" type="integer"></wm-param>
            </wm-container>
        </wm-dialog>
    </wm-view>
    <wm-view class="dialog-view" name="viewPendingApprovals">
        <wm-dialog dialogtype="design-dialog" modal="true" title="Pending Contractor Review" iconclass="wi wi-mode-edit" name="dialogPendingApprovals">
            <wm-layoutgrid name="layoutgrid7">
                <wm-gridrow name="gridrow23">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn40" horizontalalign="center" padding=".5em unset">
                        <wm-composite name="composite2">
                            <wm-label class="col-md-3 form-control-static" name="label7" caption="Review Status" horizontalalign="left" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container2" width="169px">
                                <wm-select name="selectStatusFromPending" dataset="Pending,Approved,Suspended" datavalue="Pending"></wm-select>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow24">
                    <wm-gridcolumn columnwidth="12" name="gridcolumn42" horizontalalign="center" padding=".5em unset">
                        <wm-composite name="composite3" required="true">
                            <wm-label class="col-md-3 form-control-static" name="label8" caption="Expiration Date" horizontalalign="left" fontweight="bold" required="false"></wm-label>
                            <wm-container class="col-md-9" name="container3">
                                <wm-date name="datetimeExpirationFormPending" mindate="bind:today" datepattern="MM-dd-yyyy" placeholder="Select Date" datavalue="bind:Widgets.gridPending.selecteditem.expiresDate" required="true"></wm-date>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
            <wm-dialogactions name="dialogactions2">
                <wm-button class="btn-primary" caption="Update" type="button" margin="unset 0.5em" name="buttonUpdateFromPending" on-click="Variables.UpdateVendorStatusFromPending.invoke()" iconclass="wi wi-update" disabled="bind:Widgets.datetimeExpirationFormPending.datavalue <= 0"></wm-button>
                <wm-button class="btn-secondary" caption="Cancel" on-click="closeDialog()" name="button2" iconclass="wi wi-cancel"></wm-button>
            </wm-dialogactions>
        </wm-dialog>
    </wm-view>
    <wm-view class="dialog-view" name="viewReviewApproved">
        <wm-dialog dialogtype="design-dialog" modal="true" title="Approved Contractor Review" iconclass="wi wi-mode-edit" name="dialogReviewApproved">
            <wm-layoutgrid name="layoutgrid7_1">
                <wm-gridrow name="gridrow24_1">
                    <wm-gridcolumn columnwidth="12" horizontalalign="center" padding=".5em unset" name="gridcolumn41">
                        <wm-composite name="composite4">
                            <wm-label class="col-md-3 form-control-static" caption="Review Status" horizontalalign="left" name="label9" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container4" width="169px">
                                <wm-select dataset="Pending,Approved,Suspended" datavalue="Approved" name="selectFromApproved"></wm-select>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow25_1">
                    <wm-gridcolumn columnwidth="12" horizontalalign="center" padding=".5em unset" name="gridcolumn42_1">
                        <wm-composite name="composite5" required="true">
                            <wm-label class="col-md-3 form-control-static" caption="Expiration Date" horizontalalign="left" name="label10" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container5">
                                <wm-date mindate="bind:today" datepattern="MM-dd-yyyy" name="datetimeFormApproved" datavalue="bind:Widgets.gridApprovedVendors.selecteditem.expiresDate" hourstep="0" placeholder="Select Date" required="true"></wm-date>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
            <wm-dialogactions name="dialogactions3">
                <wm-button class="btn-primary" caption="Update" type="button" margin="unset 0.5em" on-click="Variables.UpdateVendorStatusFromApproved.invoke()" name="buttonFromApproved" iconclass="wi wi-update" disabled="bind:Widgets.datetimeFormApproved.datavalue <= 0"></wm-button>
                <wm-button class="btn-secondary" caption="Cancel" on-click="closeDialog()" name="button4" iconclass="wi wi-cancel"></wm-button>
            </wm-dialogactions>
        </wm-dialog>
    </wm-view>
    <wm-view class="dialog-view" name="viewReviewSuspended">
        <wm-dialog dialogtype="design-dialog" modal="true" title="Suspended Contractor Review" iconclass="wi wi-mode-edit" name="dialogReviewSuspended">
            <wm-layoutgrid name="layoutgrid7_2">
                <wm-gridrow name="gridrow24_2">
                    <wm-gridcolumn columnwidth="12" horizontalalign="center" padding=".5em unset" name="gridcolumn41_1">
                        <wm-composite name="composite7">
                            <wm-label class="col-md-3 form-control-static" caption="Review Status" horizontalalign="left" name="label11" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container6" width="169px">
                                <wm-select dataset="Pending,Approved,Suspended" datavalue="Suspended" name="selectFromSuspended"></wm-select>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
                <wm-gridrow name="gridrow25_2">
                    <wm-gridcolumn columnwidth="12" horizontalalign="center" padding=".5em unset" name="gridcolumn42_2">
                        <wm-composite name="composite8" required="true">
                            <wm-label class="col-md-3 form-control-static" caption="Expiration Date" horizontalalign="left" name="label12" fontweight="bold"></wm-label>
                            <wm-container class="col-md-9" name="container7">
                                <wm-date mindate="bind:today" datepattern="MM-dd-yyyy" datavalue="bind:Widgets.gridSuspended.selecteditem.expiresDate" name="datetimeFromSuspended" placeholder="Select Date" required="true"></wm-date>
                            </wm-container>
                        </wm-composite>
                    </wm-gridcolumn>
                </wm-gridrow>
            </wm-layoutgrid>
            <wm-dialogactions name="dialogactions4">
                <wm-button class="btn-primary" caption="Update" type="button" margin="unset 0.5em" on-click="Variables.UpdateVendorStatusFromSuspended.invoke()" name="buttonFromSuspended" iconclass="wi wi-update" disabled="bind:Widgets.datetimeFromSuspended.datavalue <= 0"></wm-button>
                <wm-button class="btn-secondary" caption="Cancel" on-click="closeDialog()" name="button6" iconclass="wi wi-cancel"></wm-button>
            </wm-dialogactions>
        </wm-dialog>
    </wm-view>
</wm-page>